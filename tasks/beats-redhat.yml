---
# - name: Ensure libselinux-python on CentOS 6.x
#   yum:
#     name: libselinux-python
#     state: present
#     update_cache: true
#   register: libselinux_install
#   until: libselinux_install is succeeded
#   when:
#     - ansible_distribution == "CentOS"
#     - ansible_distribution_major_version == "6"

- name: Importing elastic GPG Key
  rpm_key:
    key: '{{ elastic_gpg_key }}'
    state: present
  register: installed_key
  until: installed_key is succeeded

- name: Add beats yum repository
  yum_repository:
    name: beats
    description: Beats repository
    file: '{{ beats_yum_repo_file }}'
    baseurl: '{{ repo_url }}'
    gpgcheck: true
    gpgkey: '{{ elastic_gpg_key }}'
    enabled: true
    state: present
