---
# vars file for beats
beats_package_url: https://artifacts.elastic.co/downloads/beats
elastic_gpg_key: https://artifacts.elastic.co/GPG-KEY-elasticsearch
beats_yum_repo_file: /etc/yum.repos.d/beats.repo
beats_major_version: >-
  {{ (beats_version | default('7')).split('.') | first }}.x
beat_shipper_conf:
  shipper: '{{ shipper_conf | default(omit) }}'
instance_default_file: '{{ default_file }}/{{ beat }}'
conf_file: '{{ beats_conf_dir }}/{{ beat }}.yml'
beat_output_conf:
  output: '{{ output_conf }}'
beat_logging_conf:
  logging: '{{ logging_conf }}'

beats_tasks: >-
  {{ beats_use_repository
    | ternary('beats-' ~ (ansible_os_family | lower) ~ '.yml',
              'beats-url.yml') }}
os_arch: >-
  {{ (ansible_architecture == 'x86_64') | ternary('amd64', 'i386') }}
beats_dl_version: >-
  {{ beats_oss_version|bool | ternary('oss-' ~ beats_version|default('')), beats_version|default('')}}
beats_repo_version: >-
  {{ beats_oss_version|bool | ternary('oss-' ~ beats_major_version, beats_major_version) }}
beats_download_url: >-
  {{ beats_custom_package_url | default(beats_package_url ~ '/' ~ beat ~ '/' ~ beats_base_package) }}
beats_name_package: >-
  {{ (beats_use_repository | bool) | ternary(beats_repo_package, beats_download_url) }}
